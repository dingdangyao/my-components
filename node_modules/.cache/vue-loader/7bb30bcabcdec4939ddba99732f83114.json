{"remainingRequest":"C:\\Users\\10674\\Documents\\mp\\vue\\my-components\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\10674\\Documents\\mp\\vue\\my-components\\packages\\components\\record\\record.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\10674\\Documents\\mp\\vue\\my-components\\packages\\components\\record\\record.vue","mtime":1588157043388},{"path":"C:\\Users\\10674\\Documents\\mp\\vue\\my-components\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\10674\\Documents\\mp\\vue\\my-components\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUmVjb3JkIGZyb20gIi4vc3JjL1JlY29yZC1zZGsiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiUmVjb3JkIiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgY29udGVudDogIiIsDQogICAgICBjaGF0TGlzdDogW10sDQogICAgICB0b3BpYzogW10sDQogICAgICBmaWxlTGlzdDogW10sDQogICAgICBpc0ZpbmlzaGVkOiBmYWxzZSwNCiAgICAgIGF1ZGlvOiAiIiwNCiAgICAgIHJlY29yZGVyOiBuZXcgUmVjb3JkKCkNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgc3RhcnRSZWNvcmQ6IGZ1bmN0aW9uKCkgew0KICAgICAgY29uc29sZS5sb2coInN0YXJ0IHRvIHJlY29yZCBub3cuIik7DQogICAgICBsZXQgc2VsZiA9IHRoaXM7DQogICAgICBzZWxmLmlzRmluaXNoZWQgPSBmYWxzZTsNCiAgICAgIHNlbGYucmVjb3JkZXIuc3RhcnRSZWNvcmQoew0KICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMNCiAgICAgICAgc3VjY2VzczogcmVzID0+IHsNCiAgICAgICAgICAvL+atpOWkhOWPr+S7peiOt+WPlumfs+mikea6kOaWh+S7tihyZXMp77yM55So5LqO5LiK5Lyg562J5pON5L2cDQogICAgICAgICAgY29uc29sZS5sb2coInN0b3AgcmVjb3JkIHN1Y2Nlc3NmdWxseS4iKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzDQogICAgICAgIGVycm9yOiByZXMgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKCJzdG9wIHJlY29yZCBmYWlsZWQuIik7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgc3RvcFJlY29yZDogZnVuY3Rpb24oKSB7DQogICAgICBjb25zb2xlLmxvZygic3RvcCByZWNvcmQgbm93LiIpOw0KICAgICAgbGV0IHNlbGYgPSB0aGlzOw0KICAgICAgc2VsZi5pc0ZpbmlzaGVkID0gZmFsc2U7DQogICAgICBzZWxmLnJlY29yZGVyLnN0b3BSZWNvcmQoew0KICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMNCiAgICAgICAgc3VjY2VzczogcmVzID0+IHsNCiAgICAgICAgICAvL+atpOWkhOWPr+S7peiOt+WPlumfs+mikea6kOaWh+S7tihyZXMp77yM55So5LqO5LiK5Lyg562J5pON5L2cDQogICAgICAgICAgY29uc29sZS5sb2coInN0b3AgcmVjb3JkIHN1Y2Nlc3NmdWxseS4iKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzDQogICAgICAgIGVycm9yOiByZXMgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKCJzdG9wIHJlY29yZCBmYWlsZWQuIik7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgcGxheTogZnVuY3Rpb24oKSB7DQogICAgICBjb25zb2xlLmxvZygicGxheSByZWNvcmQgbm93LiIpOw0KICAgICAgbGV0IHNlbGYgPSB0aGlzOw0KICAgICAgc2VsZi5pc0ZpbmlzaGVkID0gdHJ1ZTsNCiAgICAgIHNlbGYuYXVkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhdWRpbyIpOw0KICAgICAgc2VsZi5yZWNvcmRlci5wbGF5KHNlbGYuYXVkaW8pOw0KICAgIH0sDQogICAgc2VuZDogZnVuY3Rpb24oKSB7DQogICAgICBjb25zb2xlLmxvZygic2VuZCB0aGUgbWVzc2FnZS4iKTsNCiAgICAgIGxldCBzZWxmID0gdGhpczsNCiAgICAgIGxldCBtc2cgPSB7fTsNCiAgICAgIGxldCBtc2dJZCA9IDE7DQogICAgICBsZXQgZGF0YSA9IHNlbGYucmVjb3JkZXIuZ2V0QmxvYigpOw0KICAgICAgbXNnW21zZ0lkXSA9IGRhdGE7DQogICAgICBjb25zb2xlLmxvZyhkYXRhKTsNCiAgICAgIGxldCBkdXIgPSBkYXRhLmR1cmF0aW9uIC8gMTA7DQogICAgICBsZXQgc3RyID0NCiAgICAgICAgIjxkaXYgY2xhc3M9J3dhcnBlcic+PGRpdiBpZD0iICsNCiAgICAgICAgbXNnSWQgKw0KICAgICAgICAiIGNsYXNzPSd2b2ljZUl0ZW0nPiIgKw0KICAgICAgICBkdXIgKw0KICAgICAgICAiczwvZGl2PjwvZGl2PiI7DQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWVzc2FnZXMiKS5hcHBlbmQoc3RyKTsNCiAgICAgIG1zZ0lkKys7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["record.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"record.vue","sourceRoot":"packages/components/record","sourcesContent":["<template>\r\n  <div class=\"record\">\r\n    <div id=\"messages\"></div>\r\n    <h2>点击开始录音:</h2>\r\n    <input @click=\"startRecord\" type=\"button\" value=\"录音\" />\r\n    <input @click=\"stopRecord\" type=\"button\" value=\"停止\" />\r\n    <input @click=\"play\" type=\"button\" value=\"播放\" />\r\n    <input @click=\"send\" type=\"button\" value=\"发送\" />\r\n    <div class=\"record-play\" v-show=\"isFinished\">\r\n      <h2>voice player:</h2>\r\n      <audio controls autoplay></audio>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Record from \"./src/Record-sdk\";\r\nexport default {\r\n  name: \"Record\",\r\n  data() {\r\n    return {\r\n      content: \"\",\r\n      chatList: [],\r\n      topic: [],\r\n      fileList: [],\r\n      isFinished: false,\r\n      audio: \"\",\r\n      recorder: new Record()\r\n    };\r\n  },\r\n  methods: {\r\n    startRecord: function() {\r\n      console.log(\"start to record now.\");\r\n      let self = this;\r\n      self.isFinished = false;\r\n      self.recorder.startRecord({\r\n        // eslint-disable-next-line no-unused-vars\r\n        success: res => {\r\n          //此处可以获取音频源文件(res)，用于上传等操作\r\n          console.log(\"stop record successfully.\");\r\n        },\r\n        // eslint-disable-next-line no-unused-vars\r\n        error: res => {\r\n          console.log(\"stop record failed.\");\r\n        }\r\n      });\r\n    },\r\n    stopRecord: function() {\r\n      console.log(\"stop record now.\");\r\n      let self = this;\r\n      self.isFinished = false;\r\n      self.recorder.stopRecord({\r\n        // eslint-disable-next-line no-unused-vars\r\n        success: res => {\r\n          //此处可以获取音频源文件(res)，用于上传等操作\r\n          console.log(\"stop record successfully.\");\r\n        },\r\n        // eslint-disable-next-line no-unused-vars\r\n        error: res => {\r\n          console.log(\"stop record failed.\");\r\n        }\r\n      });\r\n    },\r\n    play: function() {\r\n      console.log(\"play record now.\");\r\n      let self = this;\r\n      self.isFinished = true;\r\n      self.audio = document.querySelector(\"audio\");\r\n      self.recorder.play(self.audio);\r\n    },\r\n    send: function() {\r\n      console.log(\"send the message.\");\r\n      let self = this;\r\n      let msg = {};\r\n      let msgId = 1;\r\n      let data = self.recorder.getBlob();\r\n      msg[msgId] = data;\r\n      console.log(data);\r\n      let dur = data.duration / 10;\r\n      let str =\r\n        \"<div class='warper'><div id=\" +\r\n        msgId +\r\n        \" class='voiceItem'>\" +\r\n        dur +\r\n        \"s</div></div>\";\r\n      document.getElementById(\"messages\").append(str);\r\n      msgId++;\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n#messages {\r\n  min-height: 400px;\r\n  margin-bottom: 10px;\r\n  border: 1px solid gainsboro;\r\n}\r\n.warper {\r\n  clear: both;\r\n  margin: 10px;\r\n  display: block;\r\n  min-height: 32px;\r\n}\r\n.voiceItem {\r\n  background-color: skyblue;\r\n  min-width: 100px;\r\n  min-height: 32px;\r\n  border-radius: 3px;\r\n  float: right;\r\n  cursor: pointer;\r\n  line-height: 32px;\r\n  text-indent: 10px;\r\n}\r\n</style>\r\n"]}]}