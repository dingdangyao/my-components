{"remainingRequest":"C:\\Users\\10674\\Documents\\mp\\vue\\my-components\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\10674\\Documents\\mp\\vue\\my-components\\packages\\components\\record\\record.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\10674\\Documents\\mp\\vue\\my-components\\packages\\components\\record\\record.vue","mtime":1588157043388},{"path":"C:\\Users\\10674\\Documents\\mp\\vue\\my-components\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\10674\\Documents\\mp\\vue\\my-components\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\10674\\Documents\\mp\\vue\\my-components\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\10674\\Documents\\mp\\vue\\my-components\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\10674\\Documents\\mp\\vue\\my-components\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KI21lc3NhZ2VzIHsNCiAgbWluLWhlaWdodDogNDAwcHg7DQogIG1hcmdpbi1ib3R0b206IDEwcHg7DQogIGJvcmRlcjogMXB4IHNvbGlkIGdhaW5zYm9ybzsNCn0NCi53YXJwZXIgew0KICBjbGVhcjogYm90aDsNCiAgbWFyZ2luOiAxMHB4Ow0KICBkaXNwbGF5OiBibG9jazsNCiAgbWluLWhlaWdodDogMzJweDsNCn0NCi52b2ljZUl0ZW0gew0KICBiYWNrZ3JvdW5kLWNvbG9yOiBza3libHVlOw0KICBtaW4td2lkdGg6IDEwMHB4Ow0KICBtaW4taGVpZ2h0OiAzMnB4Ow0KICBib3JkZXItcmFkaXVzOiAzcHg7DQogIGZsb2F0OiByaWdodDsNCiAgY3Vyc29yOiBwb2ludGVyOw0KICBsaW5lLWhlaWdodDogMzJweDsNCiAgdGV4dC1pbmRlbnQ6IDEwcHg7DQp9DQo="},{"version":3,"sources":["record.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"record.vue","sourceRoot":"packages/components/record","sourcesContent":["<template>\r\n  <div class=\"record\">\r\n    <div id=\"messages\"></div>\r\n    <h2>点击开始录音:</h2>\r\n    <input @click=\"startRecord\" type=\"button\" value=\"录音\" />\r\n    <input @click=\"stopRecord\" type=\"button\" value=\"停止\" />\r\n    <input @click=\"play\" type=\"button\" value=\"播放\" />\r\n    <input @click=\"send\" type=\"button\" value=\"发送\" />\r\n    <div class=\"record-play\" v-show=\"isFinished\">\r\n      <h2>voice player:</h2>\r\n      <audio controls autoplay></audio>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Record from \"./src/Record-sdk\";\r\nexport default {\r\n  name: \"Record\",\r\n  data() {\r\n    return {\r\n      content: \"\",\r\n      chatList: [],\r\n      topic: [],\r\n      fileList: [],\r\n      isFinished: false,\r\n      audio: \"\",\r\n      recorder: new Record()\r\n    };\r\n  },\r\n  methods: {\r\n    startRecord: function() {\r\n      console.log(\"start to record now.\");\r\n      let self = this;\r\n      self.isFinished = false;\r\n      self.recorder.startRecord({\r\n        // eslint-disable-next-line no-unused-vars\r\n        success: res => {\r\n          //此处可以获取音频源文件(res)，用于上传等操作\r\n          console.log(\"stop record successfully.\");\r\n        },\r\n        // eslint-disable-next-line no-unused-vars\r\n        error: res => {\r\n          console.log(\"stop record failed.\");\r\n        }\r\n      });\r\n    },\r\n    stopRecord: function() {\r\n      console.log(\"stop record now.\");\r\n      let self = this;\r\n      self.isFinished = false;\r\n      self.recorder.stopRecord({\r\n        // eslint-disable-next-line no-unused-vars\r\n        success: res => {\r\n          //此处可以获取音频源文件(res)，用于上传等操作\r\n          console.log(\"stop record successfully.\");\r\n        },\r\n        // eslint-disable-next-line no-unused-vars\r\n        error: res => {\r\n          console.log(\"stop record failed.\");\r\n        }\r\n      });\r\n    },\r\n    play: function() {\r\n      console.log(\"play record now.\");\r\n      let self = this;\r\n      self.isFinished = true;\r\n      self.audio = document.querySelector(\"audio\");\r\n      self.recorder.play(self.audio);\r\n    },\r\n    send: function() {\r\n      console.log(\"send the message.\");\r\n      let self = this;\r\n      let msg = {};\r\n      let msgId = 1;\r\n      let data = self.recorder.getBlob();\r\n      msg[msgId] = data;\r\n      console.log(data);\r\n      let dur = data.duration / 10;\r\n      let str =\r\n        \"<div class='warper'><div id=\" +\r\n        msgId +\r\n        \" class='voiceItem'>\" +\r\n        dur +\r\n        \"s</div></div>\";\r\n      document.getElementById(\"messages\").append(str);\r\n      msgId++;\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n#messages {\r\n  min-height: 400px;\r\n  margin-bottom: 10px;\r\n  border: 1px solid gainsboro;\r\n}\r\n.warper {\r\n  clear: both;\r\n  margin: 10px;\r\n  display: block;\r\n  min-height: 32px;\r\n}\r\n.voiceItem {\r\n  background-color: skyblue;\r\n  min-width: 100px;\r\n  min-height: 32px;\r\n  border-radius: 3px;\r\n  float: right;\r\n  cursor: pointer;\r\n  line-height: 32px;\r\n  text-indent: 10px;\r\n}\r\n</style>\r\n"]}]}